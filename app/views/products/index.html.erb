<%  content_for :javascript do %>
<%  fw_strings = {:val_true => t('true'), :val_false => t('false'), :submit => t('submit'), :show_all => t('show_all'), :formats => {'xls' => t('download') + " XLS"}}    
  categories_hash = {"null" => t(:none_assigned) }
  @categories.each { |d|
    categories_hash[d.id] = d.name
  }  %>
<%= filter_widget("product-rules", :url => url_for(params), 
                                   :wrap => false, 
                                   :beforeSend => %{function() {$("#records").html('<p><img src="/images/loading.gif" alt="loading" /></p>');}}, 
                                   :strings => fw_strings) do |widget| 
        widget.add_rule("price", t(:price), "numeric")
        widget.add_rule("cost", t(:cost), "numeric")
        widget.add_rule("product_categories.id",t(:category), "enum", categories_hash)
      end %>
<% end %>
<%= render :partial => "index" %>
<p>
  <%= t(:product_rules)%>
</p>
<p id="product-rules"></p>